@page "/"
@using Microsoft.EntityFrameworkCore
@using ULO.UI.Models.Entities
@inject ULODbContext _dbcontext

<PageTitle>Home</PageTitle>

<main>
    <div class="main-content d-flex justify-content-center align-items-center flex-column">
        <div class="news-section w-75 text-center">
            <h2>Aktualności</h2>

            @if (aktualnosci == null || aktualnosci.Count == 0)
            {
                <p>Brak nowych wiadomości.</p>
            }
            else
            {
                <!-- Carousel for displaying news -->
                <div id="newsCarousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        @foreach (var (aktualnosc, index) in aktualnosci.Select((value, i) => (value, i)))
                        {
                            <div class="carousel-item @(index == 0 ? "active" : "")">
                                <h3>@aktualnosc.Title</h3>
                                <p>@aktualnosc.Content</p>
                                <small>@aktualnosc.Date.ToString("yyyy-MM-dd")</small>
                            </div>
                        }
                    </div>

                    <!-- Navigation controls for carousel -->
                    <a class="carousel-control-prev" href="#newsCarousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#newsCarousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            }
        </div>

        <!-- Additional content can be added below here -->
        <div class="mt-4">
            <!-- Tu możesz dodać kolejne sekcje -->
        </div>
    </div>
</main>

<style>
    .carousel-control-prev-icon,
    .carousel-control-next-icon {
        background-color: black; /* Set the arrow background color to black */
        border-radius: 50%; /* Add a circular shape to make it more visible */
        width: 3rem; /* Increase size for better visibility */
        height: 3rem;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var newsCarousel = document.getElementById('newsCarousel');
        var carousel = new bootstrap.Carousel(newsCarousel, {
            interval: 10000, // 3 seconds
            pause: 'hover'  // Pause on hover
        });
    });
</script>

@code {
    public List<Aktualnosc> aktualnosci;

    protected override async Task OnInitializedAsync()
    {
        aktualnosci = await _dbcontext.Aktualnosc.OrderByDescending(a => a.Date).Take(5).ToListAsync();
    }
}

